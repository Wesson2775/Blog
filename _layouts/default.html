<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}">
    <link rel="icon" href="{{ '/favicon.ico' | relative_url }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <script src="{{ '/assets/js/search.js' | relative_url }}" defer></script>
</head>
<body>
    <div class="main-container">
        {% include header.html %}
        <main class="content">
            {{ content }}
        </main>
        {% include footer.html %}
    </div>
    <button class="back-to-top" aria-label="返回顶部">
        <i class="fas fa-arrow-up"></i>
    </button>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const langLinks = document.querySelectorAll('.lang-link');
            const savedLang = localStorage.getItem('lang') || 'zh';
            
            langLinks.forEach(link => {
                link.classList.toggle('active', link.textContent.toLowerCase() === savedLang);
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    localStorage.setItem('lang', e.target.textContent.toLowerCase());
                    window.location.href = e.target.href;
                });
            });

            const backToTop = document.querySelector('.back-to-top');
            window.addEventListener('scroll', () => {
                backToTop.classList.toggle('visible', window.scrollY > 300);
            });
            backToTop.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });
    </script>
</body>
</html>