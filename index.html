<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ '/assets/css/styles.css' | relative_url }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <title>An Dabe</title>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <div class="header-top">
                <div class="lang">
                    <a href="{{ '/index-zh.html' | relative_url }}" class="lang-link active">ZH</a>
                    <a href="{{ '/index-en.html' | relative_url }}" class="lang-link">EN</a>
                </div>
            </div>
            <div class="header-middle">
                <h1>An Dabe</h1>
                <p>"seize the day, gather ye rosebuds while ye may."</p>
            </div>
            <div class="header-bottom">
                <div class="header-bottom-nav">
                    <ul>
                        <li><a href="{{ '/' | relative_url }}">首页</a></li>
                        <li><a href="{{ '/categories' | relative_url }}">分类</a></li>
                        <li><a href="{{ '/friends' | relative_url }}">友邻</a></li>
                        <li><a href="{{ '/support' | relative_url }}">支持</a></li>
                        <li><a href="{{ '/bookshelf' | relative_url }}">书架</a></li>
                        <li><a href="{{ '/about' | relative_url }}">关于</a></li>
                    </ul>
                </div>
                <div class="search-container">
                    <input type="text" class="search-input" placeholder="搜索...">
                    <i class="fas fa-search search-icon"></i>
                </div>
            </div>
        </div>
        <div class="article">
            <ul>
                {% for post in site.docs limit:5 %}
                <li>
                    <div class="article-data">
                        <div class="article-data-date">
                            <p>{{ post.date | date: "%Y/%m/%d" }}</p>
                        </div>
                        <div class="article-data-tag">
                            <p>{{ post.tags | first }}</p>
                        </div>
                    </div>
                    <div class="article-content">
                        <a href="{{ post.url | relative_url }}"><h2>{{ post.title }}</h2></a>
                        <p>{{ post.excerpt | strip_html | truncate: 150 }}</p>
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
        
        <footer class="footer">
            <p>© 2021 - {{ 'now' | date: "%Y" }} Dayu ﹒ CC BY-NC-ND 4.0</p>
            <p><a href="{{ '/analytics' | relative_url }}">Analytics</a> ﹒ <a href="{{ '/rss' | relative_url }}">RSS</a></p>
        </footer>
    </div>
    <button class="back-to-top" title="回到顶部">
        <i class="fas fa-arrow-up"></i>
    </button>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const langLinks = document.querySelectorAll('.lang-link');
            const savedLang = localStorage.getItem('lang') || 'zh';

            langLinks.forEach(link => {
                link.classList.remove('active');
                if (link.textContent.toLowerCase() === savedLang) {
                    link.classList.add('active');
                }

                link.addEventListener('click', (e) => {
                    langLinks.forEach(l => l.classList.remove('active'));
                    e.target.classList.add('active');
                    localStorage.setItem('lang', e.target.textContent.toLowerCase());
                });
            });

            const backToTopButton = document.querySelector('.back-to-top');
            backToTopButton.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTopButton.classList.add('visible');
                } else {
                    backToTopButton.classList.remove('visible');
                }
            });
        });
    </script>
</body>
</html>